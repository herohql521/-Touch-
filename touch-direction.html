<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" Content="text/html; charset=utf-8;">
<title>移动端触摸滑动</title>
<meta name="author" content="rainna" />
<meta name="keywords" content="rainna's js lib" />
<meta name="description" content="移动端触摸滑动" />
<meta name="viewport" content="target-densitydpi=320,width=640,user-scalable=no">
<style>
*{margin:0;padding:0;}
li{list-style:none;}

.m-slider{width:600px;margin:50px 20px;overflow:hidden;}
.m-slider .cnt{width:3000px;}
.m-slider .cnt li{float:left;width:600px;}
.m-slider .cnt img{display:block;width:100%;height:450px;}
.m-slider .cnt p{margin:20px 0;}
.m-slider .icons{text-align:center;color:#000;}
.m-slider .icons span{margin:0 5px;}
.m-slider .icons .curr{color:red;}
.f-anim{transition: margin-left 0.3s ease-in;}
</style>
</head>

<body>
<div class="m-slider">
    <ul class="cnt f-anim" id="slider" style="margin-left:0;">
        <li>
            <img src="http://imglf1.ph.126.net/qKodH3sZoVbPalKFtHS9mw==/6608946691259322175.jpg">
            
        </li>
        <li>
            <img src="http://imglf1.ph.126.net/40-jqH_j6EoCWnZOixY2pA==/4798022453110310215.jpg">
          
        </li>
        <li>
            <img src="http://imglf0.ph.126.net/Jnmi2y51zVdjKAYlibtpFw==/3068640196117481166.jpg">
           
        </li>
        <li>
            <img src="http://imglf1.ph.126.net/79GPsjhwiIj8e-0nP5MsEQ==/6619295294699949331.jpg">
          
        </li>
        <li>
            <img src="http://imglf1.ph.126.net/40-jqH_j6EoCWnZOixY2pA==/4798022453110310215.jpg">
          
        </li>
    </ul>
  
</div>

<script>
    /*全局变量*/
    var startX = 0, startY = 0;
    var slider = document.getElementById("slider");
  
       /*计算角度*/
    function getSlideAngle(dx,dy){
        return Math.atan2(dy,dx)*180/Math.PI;

    }


    /*方向判断*/
    //根据起点和终点返回方向 1：向上，2：向下，3：向左，4：向右,0：未滑动  

    function getSlideDirection(dx,dy){
        var result ;

      //如果滑动距离太短  
        if(Math.abs(dx) < 2 && Math.abs(dy) < 2) {  
           return result = 0;  
        };  

        var angel = getSlideAngle(dx,dy);

        if(angel>= -45 && angel <= 45) {

            result = 4;

        }else if(angel>45 && angel <135) {

            result = 1;

        }else if( angel >=135 && angel <= 180 || angel >=-180 && angel<-135) {

            result = 3;

        }else if( angel >=-135 && angel<-45) {

            result =2;
        }

          return result;
    };



    /*touchStart*/
    function touchStartFunc(e){
       var touch = e.targetTouches[0];
       var x = Number(touch.pageX);
       var y = Number(touch.pageY);
    /*初始触摸坐标*/
       startX = x;
       startY = y;
    }
    
    /*touchMove*/
     function touchMoveFunc(e){
        var touch = e.targetTouches[0];
        var x = Number(touch.pageX);
        var y = Number(touch.pageY);
        /*滑动距离*/
        var moveX = x - startX;
        var moveY = y - startY;
        }

       
 //相应事件
   var mmmu = function(){
    alert("向上");
   }
  
     /*touchEnd*/
     function touchEndFunc(e){
       var touch = e.changedTouches[0];
       var endX = touch.pageX;
       var endY = touch.pageY;
       var dx = endX - startX;
       var dy = startY- endY;

       var direction = getSlideDirection(dx,dy);
       switch(direction){
        case 0:
                alert("无滑动");
            break;
        case 1:
                 mmmu();
            break;
        case 2:
                alert("向下");

            break;
        case 3:
               if( parseInt(slider.style.marginLeft)> -2400){
                 slider.style.marginLeft = parseInt(slider.style.marginLeft) - 600 + "px";
               };
       
          
              
              
            break;
        case 4:
               if( parseInt(slider.style.marginLeft)<0){
                 slider.style.marginLeft = parseInt(slider.style.marginLeft) + 600 + "px";
               };
            break;
        default:

     }
 };

  
   



     /*绑定事件*/
     function bind(){
        slider.addEventListener('touchstart',touchStartFunc,false);
        slider.addEventListener('touchmove',touchMoveFunc,false);
        slider.addEventListener('touchend',touchEndFunc,false);
     }

     window.onload = bind;
</script>
</body>
</html>